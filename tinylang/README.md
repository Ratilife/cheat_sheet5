# TinyLang (ANTLR4 учебный пример)

Простой язык программирования для обучения ANTLR4. Включает:
- переменные (`let x = 1;`),
- арифметику, логические операции и приоритеты,
- `if/else`, `while`,
- функции `func name(args) { ... }` и вызовы,
- строки и комментарии `//`, `/*...*/`.

Основной файл грамматики: `TinyLang.g4` (комбинированная грамматика: парсер + лексер).
Пример исходника: `examples/hello.tiny`.

## Как сгенерировать и запустить (Python)

Требования: Java (JDK), Python 3.

```bash
# 1) Скачать ANTLR
mkdir -p /workspace/tinylang/lib
curl -L -o /workspace/tinylang/lib/antlr-4.13.2-complete.jar "https://www.antlr.org/download/antlr-4.13.2-complete.jar"

# 2) Сгенерировать парсер/лексер в Python
cd /workspace/tinylang
java -jar lib/antlr-4.13.2-complete.jar -Dlanguage=Python3 -visitor -no-listener TinyLang.g4

# 3) Поставить рантайм
pip install antlr4-python3-runtime

# 4) Запустить демонстрационный драйвер
python3 main.py examples/hello.tiny
```

## Идеи устройства грамматики

- Приоритеты выражений реализованы через левую рекурсию: от `||` до `*`/`/`/`%`, унарные `!`/`-`, затем постфиксные вызовы.
- Присваивание имеет наименьший приоритет и право-ассоциативно: `a = b = 1`.
- Ключевые слова определены явно в лексере и стоят перед `ID`, чтобы «перебивать» идентификатор.
- Пробелы и комментарии отправляются в `HIDDEN`-канал, чтобы парсер их не видел.

## Расширения как упражнения

- Поддержка чисел с экспонентой: расширить `FLOAT`.
- Индексация и доступ к полям: добавить постфикс `primary ('[' expr ']' | '.' ID)*`.
- Многострочные строки: режимы (`mode`) для строкового лексирования.
- Регистронезависимые ключевые слова: шаблоны `[iI][fF]` или обработка потока символов.